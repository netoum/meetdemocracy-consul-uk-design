<% if valid_access? %>
  <% if valid_filters.any? %>
    <div class="govuk-tabs" data-module="govuk-tabs">
      <ul class="govuk-tabs__list">
        <% valid_filters.each do |filter| %>
          <% if current_filter == filter %>
            <li class="govuk-tabs__list-item govuk-tabs__list-item--selected">
              <h2 class="govuk-tabs__tab"><%= t("users.show.filters.#{filter}", count: count(filter)) %></h2>
            </li>
          <% else %>
            <li class="govuk-tabs__list-item">
              <%= link_to t("users.show.filters.#{filter}", count: count(filter)),
                          current_path_with_query_params(filter: filter, page: 1), class:"govuk-tabs__tab" %>
            </li>
          <% end %>
        <% end %>
      </ul>
      <div class="govuk-tabs__panel">
        <% if current_filter == "follows" %>
          <%= render "users/following", user: user, follows: follows.group_by(&:followable_type) %>
        <% else %>
          <%= render_user_partial current_filter %>
        <% end %>
      </div>
      
    </div>
    
  <% else %>
    <div class="callout primary">
      <%= t("users.show.no_activity") %>
    </div>
  <% end %>
<% else %>
  <div class="callout warning margin">
    <%= t("users.show.private_activity") %>
  </div>
<% end %>
